
/* reset requirejs definitions so that people who
   put requirejs in legacy compilation do not get errors */
var _old_define = define;
var _old_require = require;
define = undefined;
require = undefined;
try{

/* resource: jquery.highlightsearchterms.js */
(function($){var Highlighter,makeSearchKey,makeAddress,defaults;Highlighter=function(options){$.extend(this,options);this.terms=this.cleanTerms(this.terms.length?this.terms:this.getSearchTerms());};Highlighter.prototype={highlight:function(startnode){if(!this.terms.length||!startnode.length)return;var self=this;$.each(this.terms,function(i,term){startnode.find('*:not(textarea)').andSelf().contents().each(function(){if(this.nodeType===3)self.highlightTermInNode(this,term);});});},highlightTermInNode:function(node,word){var c=node.nodeValue,self=this,highlight,ci,index,next;if($(node).parent().hasClass(self.highlightClass))return;highlight=function(content){return $('<span class="'+self.highlightClass+'">&nbsp;</span>').text(content);};ci=self.caseInsensitive;while(c&&(index=(ci?c.toLowerCase():c).indexOf(word))>-1){$(node).before(document.createTextNode(c.substr(0,index))).before(highlight(c.substr(index,word.length))).before(document.createTextNode(c.substr(index+word.length)));next=node.previousSibling;$(node).remove();node=next;c=node.nodeValue;}},queryStringValue:function(uri,regexp){var match,pair;if(uri.indexOf('?')<0)return '';uri=uri.substr(uri.indexOf('?')+1);while(uri.indexOf('=')>=0){uri=uri.replace(/^\&*/,'');pair=uri.split('&',1)[0];uri=uri.substr(pair.length);match=pair.match(regexp);if(match)return decodeURIComponent(match[match.length-1].replace(/\+/g,' '));}return '';},termsFromReferrer:function(){var ref,i,se;ref=$.fn.highlightSearchTerms._test_referrer!==null?$.fn.highlightSearchTerms._test_referrer:document.referrer;if(!ref)return '';for(i=0;i<this.referrers.length;i+=1){se=this.referrers[i];if(ref.match(se.address))return this.queryStringValue(ref,se.key);}return '';},cleanTerms:function(terms){var self=this;return $.unique($.map(terms,function(term){term=$.trim(self.caseInsensitive?term.toLowerCase():term);return(!term||self.filterTerms.test(term))?null:term;}));},getSearchTerms:function(){var terms=[],uri=$.fn.highlightSearchTerms._test_location!==null?$.fn.highlightSearchTerms._test_location:location.href;if(this.useReferrer)$.merge(terms,this.termsFromReferrer().split(/\s+/));if(this.useLocation)$.merge(terms,this.queryStringValue(uri,this.searchKey).split(/\s+/));return terms;}};makeSearchKey=function(key){return(typeof key==='string')?new RegExp('^'+key+'=(.*)$','i'):key;};makeAddress=function(addr){return(typeof addr==='string')?new RegExp('^https?://(www\\.)?'+addr,'i'):addr;};$.fn.highlightSearchTerms=function(options){options=$.extend({},defaults,options);options=$.extend(options,{searchKey:makeSearchKey(options.searchKey),referrers:$.map(options.referrers,function(se){return{address:makeAddress(se.address),key:makeSearchKey(se.key)};})});if(options.includeOwnDomain){var hostname=$.fn.highlightSearchTerms._test_location!==null?$.fn.highlightSearchTerms._test_location:location.hostname;options.referrers.push({address:makeAddress(hostname.replace(/\./g,'\\.')),key:options.searchKey});}new Highlighter(options).highlight(this);return this;};$.fn.highlightSearchTerms.referrers=[{address:'google\\.',key:'q'},{address:'search\\.yahoo\\.',key:'p'},{address:'search\\.msn\\.',key:'q'},{address:'search\\.live\\.',key:'query'},{address:'search\\.aol\\.',key:'userQuery'},{address:'ask\\.com',key:'q'},{address:'altavista\\.',key:'q'},{address:'feedster\\.',key:'q'}];defaults={terms:[],useLocation:true,searchKey:'(searchterm|SearchableText)',useReferrer:true,referrers:$.fn.highlightSearchTerms.referrers,includeOwnDomain:true,caseInsensitive:true,filterTerms:/(not|and|or)/i,highlightClass:'highlightedSearchTerm'};$.fn.highlightSearchTerms._test_location=null;$.fn.highlightSearchTerms._test_referrer=null;$.fn.highlightSearchTerms._highlighter=Highlighter;}(jQuery));jQuery(function($){$('#region-content,#content').highlightSearchTerms({includeOwnDomain:$('dl.searchResults').length===0});});
/* resource: ++resource++plone.app.event/event.js */
if(require===undefined)require=function(reqs,torun){'use strict';return torun(window.jQuery);};require(['jquery'],function($){'use strict';var end_start_delta=1/24;function a_or_b(a,b){var ret;if(a.length>0)ret=a;else ret=b;return ret;}function getDateTime(datetimewidget){var date,time,datetime;date=$('input[name="_submit"]:first',datetimewidget).prop('value');date=date.split("-");time=$('input[name="_submit"]:last',datetimewidget).prop('value')||'00:00';time=time.split(":");datetime=new Date(parseInt(date[0],10),parseInt(date[1],10)-1,parseInt(date[2],10),parseInt(time[0],10),parseInt(time[1],10));return datetime;}function initDelta(){var start_datetime,end_datetime;start_datetime=getDateTime(a_or_b($('#formfield-form-widgets-IEventBasic-start'),$('#archetypes-fieldname-startDate')));end_datetime=getDateTime(a_or_b($('#formfield-form-widgets-IEventBasic-end'),$('#archetypes-fieldname-endDate')));end_start_delta=(end_datetime-start_datetime)/1000/60;}function updateEndDate(){var jq_start,jq_end,start_date,new_end_date;jq_start=a_or_b($('#formfield-form-widgets-IEventBasic-start'),$('#archetypes-fieldname-startDate'));jq_end=a_or_b($('#formfield-form-widgets-IEventBasic-end'),$('#archetypes-fieldname-endDate'));start_date=getDateTime(jq_start);new_end_date=new Date(start_date);new_end_date.setMinutes(start_date.getMinutes()+end_start_delta);$('.pattern-pickadate-date',jq_end).pickadate('picker').set('select',new_end_date);$('.pattern-pickadate-time',jq_end).pickatime('picker').set('select',new_end_date);}function validateEndDate(){var jq_start,jq_end,start_datetime,end_datetime;jq_start=a_or_b($('#formfield-form-widgets-IEventBasic-start'),$('#archetypes-fieldname-startDate'));jq_end=a_or_b($('#formfield-form-widgets-IEventBasic-end'),$('#archetypes-fieldname-endDate'));start_datetime=getDateTime(jq_start);end_datetime=getDateTime(jq_end);if(end_datetime<start_datetime)jq_end.addClass("error");else jq_end.removeClass("error");}function show_hide_widget(widget,hide,fade){var $widget=$(widget);if(hide===true)if(fade===true)$widget.fadeOut();else $widget.hide();else if(fade===true)$widget.fadeIn();else $widget.show();}function event_listing_calendar_init(cal){if($().dateinput&&cal.length>0){var get_req_param,val;get_req_param=function(name){if(name===new RegExp('[?&]'+encodeURIComponent(name)+'=([^&]*)').exec(window.location.search))return decodeURIComponent(name[1]);};val=get_req_param('date');if(val===undefined)val=new Date();else val=new Date(val);cal.dateinput({selectors:true,trigger:true,format:'yyyy-mm-dd',yearRange:[-10,10],firstDay:1,value:val,change:function(){var value=this.getValue("yyyy-mm-dd");window.location.href='event_listing?mode=day&date='+value;}}).unbind('change').bind('onShow',function(){var trigger_offset=$(this).next().offset();$(this).data('dateinput').getCalendar().offset({top:trigger_offset.top+20,left:trigger_offset.left});});}}function initilize_event(){var jq_whole_day,jq_time,jq_open_end,jq_end,jq_start;jq_whole_day=a_or_b($('#formfield-form-widgets-IEventBasic-whole_day input'),$('form[name="edit_form"] input#wholeDay'));jq_time=a_or_b($('#formfield-form-widgets-IEventBasic-start .pattern-pickadate-time-wrapper, #formfield-form-widgets-IEventBasic-end .pattern-pickadate-time-wrapper'),$('#archetypes-fieldname-startDate .pattern-pickadate-time-wrapper, #archetypes-fieldname-endDate .pattern-pickadate-time-wrapper'));if(jq_whole_day.length>0){jq_whole_day.bind('change',function(e){show_hide_widget(jq_time,e.target.checked,true);});show_hide_widget(jq_time,jq_whole_day.get(0).checked,false);}jq_open_end=a_or_b($('#formfield-form-widgets-IEventBasic-open_end input'),$('form[name="edit_form"] input#openEnd'));jq_end=a_or_b($('#formfield-form-widgets-IEventBasic-end'),$('#archetypes-fieldname-endDate'));if(jq_open_end.length>0){jq_open_end.bind('change',function(e){show_hide_widget(jq_end,e.target.checked,true);});show_hide_widget(jq_end,jq_open_end.get(0).checked,false);}jq_start=a_or_b($('#formfield-form-widgets-IEventBasic-start'),$('#archetypes-fieldname-startDate'));jq_start.each(function(){$(this).on('focus','.picker__input',initDelta);$(this).on('change','.picker__input',updateEndDate);});jq_end.each(function(){$(this).on('focus','.picker__input',initDelta);$(this).on('change','.picker__input',validateEndDate);});event_listing_calendar_init($("#event_listing_calendar"));};var interval=setInterval(function(){if($(document.body).hasClass('patterns-loaded')){clearInterval(interval);initilize_event();}},100);});
/* resource: ++resource++plone.formwidget.autocomplete/formwidget-autocomplete.js */
function formwidget_autocomplete_ready(event,data,formatted){(function($){var input_box=$(event.target);formwidget_autocomplete_new_value(input_box,data[0],data[1]);}(jQuery));}function formwidget_autocomplete_new_value(input_box,value,label){(function($){var base_id=input_box[0].id.replace(/-widgets-query$/,"");var base_name=input_box[0].name.replace(/\.widgets\.query$/,"");var widget_base=$('#'+base_id+"-input-fields");var all_fields=widget_base.find('input:radio, input:checkbox');input_box.val("");widget_base.find('input:radio').prop('checked',false);var selected_field=widget_base.find('input[value="'+value+'"]');if(selected_field.length){selected_field.each(function(){this.checked=true;});return;}widget_base,base_name,base_id;var idx=all_fields.length;var klass=widget_base.data('klass');var title=widget_base.data('title');var type=widget_base.data('input_type');var multiple=widget_base.data('multiple');var span=$('<span/>').attr("id",base_id+"-"+idx+"-wrapper").attr("class","option");span.append($("<label/>").attr("for",base_id+"-"+idx).append($('<input type="'+type+'"'+' name="'+base_name+(multiple?':list"':'"')+' checked="checked" />').attr("id",base_id+"-"+idx).attr("title",title).attr("value",value).addClass(klass)).append(" ").append($("<span>").attr("class","label").text(label)));widget_base.append(span);}(jQuery));}function formwidget_autocomplete_parser(formatResult,fieldNum){return function(data){var parsed=[];if(data.split){var rows=data.split("\n");for(var i=0;i<rows.length;i++){var row=$.trim(rows[i]);if(row){row=row.split("|");parsed[parsed.length]={data:row,value:row[fieldNum],result:formatResult(row,row[fieldNum])};}}}return parsed;};}
/* resource: ++resource++plone.formwidget.autocomplete/jquery.autocomplete.min.js */
;(function(e){e.fn.extend({autocomplete:function(t,n){var r=typeof t=="string";n=e.extend({},e.Autocompleter.defaults,{url:r?t:null,data:r?null:t,delay:r?e.Autocompleter.defaults.delay:10,max:n&&!n.scroll?10:150},n);n.highlight=n.highlight||function(e){return e;};n.formatMatch=n.formatMatch||n.formatItem;return this.each(function(){new e.Autocompleter(this,n);});},result:function(e){return this.bind("result",e);},search:function(e){return this.trigger("search",[e]);},flushCache:function(){return this.trigger("flushCache");},setOptions:function(e){return this.trigger("setOptions",[e]);},unautocomplete:function(){return this.trigger("unautocomplete");}});e.Autocompleter=function(t,n){function d(){var e=c.selected();if(!e)return false;var t=e.result;o=t;if(n.multiple){var r=m(i.val());if(r.length>1)t=r.slice(0,r.length-1).join(n.multipleSeparator)+n.multipleSeparator+t;t+=n.multipleSeparator;}i.val(t);w();i.trigger("result",[e.data,e.value]);return true;}function v(e,t){if(f==r.DEL){c.hide();return;}var s=i.val();if(!t&&s==o)return;o=s;s=g(s);if(s.length>=n.minChars){i.addClass(n.loadingClass);if(!n.matchCase)s=s.toLowerCase();S(s,E,w);}else{T();c.hide();}}function m(t){if(!t)return [""];var r=t.split(n.multipleSeparator);var i=[];e.each(r,function(t,n){if(e.trim(n))i[t]=e.trim(n);});return i;}function g(e){if(!n.multiple)return e;var t=m(e);return t[t.length-1];}function y(s,u){if(n.autoFill&&g(i.val()).toLowerCase()==s.toLowerCase()&&f!=r.BACKSPACE){i.val(i.val()+u.substring(g(o).length));e.Autocompleter.Selection(t,o.length,o.length+u.length);}}function b(){clearTimeout(s);s=setTimeout(w,200);}function w(){var r=c.visible();c.hide();clearTimeout(s);T();if(n.mustMatch)i.search(function(e){if(!e)if(n.multiple){var t=m(i.val()).slice(0,-1);i.val(t.join(n.multipleSeparator)+(t.length?n.multipleSeparator:""));}else i.val("");});if(r)e.Autocompleter.Selection(t,t.value.length,t.value.length);}function E(e,t){if(t&&t.length&&a){T();c.display(t,e);y(e,t[0].value);c.show();}else w();}function S(r,i,s){if(!n.matchCase)r=r.toLowerCase();var o=u.load(r);if(o&&o.length)i(r,o);else if(typeof n.url=="string"&&n.url.length>0){var a={timestamp:+new Date()};e.each(n.extraParams,function(e,t){a[e]=typeof t=="function"?t():t;});e.ajax({mode:"abort",port:"autocomplete"+t.name,dataType:n.dataType,url:n.url,data:e.extend({q:g(r),limit:n.max},a),success:function(e){var t=n.parse&&n.parse(e)||x(e);u.add(r,t);i(r,t);}});}else{c.emptyList();s(r);}}function x(t){var r=[];var i=t.split("\n");for(var s=0;s<i.length;s++){var o=e.trim(i[s]);if(o){o=o.split("|");r[r.length]={data:o,value:o[0],result:n.formatResult&&n.formatResult(o,o[0])||o[0]};}}return r;}function T(){i.removeClass(n.loadingClass);}var r={UP:38,DOWN:40,DEL:46,TAB:9,RETURN:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8};var i=e(t).attr("autocomplete","off").addClass(n.inputClass);var s;var o="";var u=e.Autocompleter.Cache(n);var a=0;var f;var l={mouseDownOnSelect:false};var c=e.Autocompleter.Select(n,t,d,l);var h;var p=navigator.userAgent.indexOf("Opera")!=-1;p&&e(t.form).bind("submit.autocomplete",function(){if(h){h=false;return false;}});i.bind((p?"keypress":"keydown")+".autocomplete",function(t){f=t.keyCode;switch(t.keyCode){case r.UP:t.preventDefault();if(c.visible())c.prev();else v(0,true);break;case r.DOWN:t.preventDefault();if(c.visible())c.next();else v(0,true);break;case r.PAGEUP:t.preventDefault();if(c.visible())c.pageUp();else v(0,true);break;case r.PAGEDOWN:t.preventDefault();if(c.visible())c.pageDown();else v(0,true);break;case n.multiple&&e.trim(n.multipleSeparator)==","&&r.COMMA:case r.TAB:case r.RETURN:if(d()){t.preventDefault();h=true;return false;}break;case r.ESC:c.hide();break;default:clearTimeout(s);s=setTimeout(v,n.delay);break;}}).focus(function(){a++;}).blur(function(){a=0;if(!l.mouseDownOnSelect)b();}).click(function(){if(a++>1&&!c.visible())v(0,true);}).bind("search",function(){function n(e,n){var r;if(n&&n.length)for(var s=0;s<n.length;s++)if(n[s].result.toLowerCase()==e.toLowerCase()){r=n[s];break;}if(typeof t=="function")t(r);else i.trigger("result",r&&[r.data,r.value]);}var t=arguments.length>1?arguments[1]:null;e.each(m(i.val()),function(e,t){S(t,n,n);});}).bind("flushCache",function(){u.flush();}).bind("setOptions",function(){e.extend(n,arguments[1]);if("data" in arguments[1])u.populate();}).bind("unautocomplete",function(){c.unbind();i.unbind();e(t.form).unbind(".autocomplete");});};e.Autocompleter.defaults={inputClass:"ac_input",resultsClass:"ac_results",loadingClass:"ac_loading",minChars:1,delay:400,matchCase:false,matchSubset:true,matchContains:false,cacheLength:10,max:100,mustMatch:false,extraParams:{},selectFirst:true,formatItem:function(e){return e[0];},formatMatch:null,autoFill:false,width:0,multiple:false,multipleSeparator:", ",highlight:function(e,t){return e.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+t.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>");},scroll:true,scrollHeight:180};e.Autocompleter.Cache=function(t){function i(e,n){if(!t.matchCase)e=e.toLowerCase();var r=e.indexOf(n);if(r==-1)return false;return r==0||t.matchContains;}function s(e,i){if(r>t.cacheLength)u();if(!n[e])r++;n[e]=i;}function o(){if(!t.data)return false;var n={},r=0;if(!t.url)t.cacheLength=1;n[""]=[];for(var i=0,o=t.data.length;i<o;i++){var u=t.data[i];u=typeof u=="string"?[u]:u;var a=t.formatMatch(u,i+1,t.data.length);if(a===false)continue;var f=a.charAt(0).toLowerCase();if(!n[f])n[f]=[];var l={value:a,data:u,result:t.formatResult&&t.formatResult(u)||a};n[f].push(l);if(r++<t.max)n[""].push(l);}e.each(n,function(e,n){t.cacheLength++;s(e,n);});}function u(){n={};r=0;}var n={};var r=0;setTimeout(o,25);return{flush:u,add:s,populate:o,load:function(s){if(!t.cacheLength||!r)return null;if(!t.url&&t.matchContains){var o=[];for(var u in n)if(u.length>0){var a=n[u];e.each(a,function(e,t){if(i(t.value,s))o.push(t);});}return o;}else if(n[s])return n[s];else if(t.matchSubset)for(var f=s.length-1;f>=t.minChars;f--){var a=n[s.substr(0,f)];if(a){var o=[];e.each(a,function(e,t){if(i(t.value,s))o[o.length]=t;});return o;}}return null;}};};e.Autocompleter.Select=function(t,n,r,i){function p(){if(!l)return;c=e("<div/>").hide().addClass(t.resultsClass).css("position","absolute").appendTo(document.body);h=e("<ul/>").appendTo(c).mouseover(function(t){if(d(t).nodeName&&d(t).nodeName.toUpperCase()=="LI"){u=e("li",h).removeClass(s.ACTIVE).index(d(t));e(d(t)).addClass(s.ACTIVE);}}).click(function(t){e(d(t)).addClass(s.ACTIVE);r();n.focus();return false;}).mousedown(function(){i.mouseDownOnSelect=true;}).mouseup(function(){i.mouseDownOnSelect=false;});if(t.width>0)c.css("width",t.width);l=false;}function d(e){var t=e.target;while(t&&t.tagName!="LI")t=t.parentNode;if(!t)return [];return t;}function v(e){o.slice(u,u+1).removeClass(s.ACTIVE);m(e);var n=o.slice(u,u+1).addClass(s.ACTIVE);if(t.scroll){var r=0;o.slice(0,u).each(function(){r+=this.offsetHeight;});if(r+n[0].offsetHeight-h.scrollTop()>h[0].clientHeight)h.scrollTop(r+n[0].offsetHeight-h.innerHeight());else if(r<h.scrollTop())h.scrollTop(r);}}function m(e){u+=e;if(u<0)u=o.size()-1;else if(u>=o.size())u=0;}function g(e){return t.max&&t.max<e?t.max:e;}function y(){h.empty();var n=g(a.length);for(var r=0;r<n;r++){if(!a[r])continue;var i=t.formatItem(a[r].data,r+1,n,a[r].value,f);if(i===false)continue;var l=e("<li/>").html(t.highlight(i,f)).addClass(r%2==0?"ac_even":"ac_odd").appendTo(h)[0];e.data(l,"ac_data",a[r]);}o=h.find("li");if(t.selectFirst){o.slice(0,1).addClass(s.ACTIVE);u=0;}if(e.fn.bgiframe)h.bgiframe();}var s={ACTIVE:"ac_over"};var o,u=-1,a,f="",l=true,c,h;return{display:function(e,t){p();a=e;f=t;y();},next:function(){v(1);},prev:function(){v(-1);},pageUp:function(){if(u!=0&&u-8<0)v(-u);else v(-8);},pageDown:function(){if(u!=o.size()-1&&u+8>o.size())v(o.size()-1-u);else v(8);},hide:function(){c&&c.hide();o&&o.removeClass(s.ACTIVE);u=-1;},visible:function(){return c&&c.is(":visible");},current:function(){return this.visible()&&(o.filter("."+s.ACTIVE)[0]||t.selectFirst&&o[0]);},show:function(){var r=e(n).offset();c.css({width:typeof t.width=="string"||t.width>0?t.width:e(n).width(),top:r.top+n.offsetHeight,left:r.left}).show();if(t.scroll){h.scrollTop(0);h.css({maxHeight:t.scrollHeight,overflow:"auto"});if(navigator.userAgent.indexOf("MSIE")!=1&&typeof document.body.style.maxHeight==="undefined"){var i=0;o.each(function(){i+=this.offsetHeight;});var s=i>t.scrollHeight;h.css("height",s?t.scrollHeight:i);if(!s)o.width(h.width()-parseInt(o.css("padding-left"))-parseInt(o.css("padding-right")));}}},selected:function(){var t=o&&o.filter("."+s.ACTIVE).removeClass(s.ACTIVE);return t&&t.length&&e.data(t[0],"ac_data");},emptyList:function(){h&&h.empty();},unbind:function(){c&&c.remove();}};};e.Autocompleter.Selection=function(e,t,n){if(e.createTextRange){var r=e.createTextRange();r.collapse(true);r.moveStart("character",t);r.moveEnd("character",n);r.select();}else if(e.setSelectionRange)e.setSelectionRange(t,n);else if(e.selectionStart){e.selectionStart=t;e.selectionEnd=n;}e.focus();};})(jQuery);
}catch(e){
    // log it
    if (typeof console !== "undefined"){
        console.log('Error loading javascripts!' + e);
    }
}finally{
    define = _old_define;
    require = _old_require;
}
